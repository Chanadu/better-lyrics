---
import Layout from '../layouts/Layout.astro';
import Button from '../components/Button.astro';
import UserProfileInfo from '../components/UserProfileInfo.astro';
import PlaylistList from '../components/PlaylistList.astro';

console.log('Access Token:', Astro.session?.get('access_token'));

const token = Astro.session?.get('access_token') || '';
---

<Layout>
	<div class='flex h-full w-full flex-col gap-12 p-16 pt-8'>
		<div class='flex flex-row items-center justify-between'>
			<h1 class='text-xl'>User Profile Page</h1>
			<!-- <button id='logout' class='cursor-pointer'>Logout</button> -->
			<Button id='logout'>Logout</Button>
		</div>
		<UserProfileInfo />
		<PlaylistList />
	</div>
</Layout>
Token: {token}

<script>
	const logoutButton = document.querySelector('#logout')!;

	logoutButton.addEventListener('click', () => {
		Astro.session?.set('access_token', '');
		window.location.href = '/';
	});
	console.log(Astro.session?.get('access_token'));
</script>
