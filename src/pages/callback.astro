---

---

<div class='item-center flex h-screen w-screen justify-center text-3xl'>Loading</div>

<script>
	import { actions } from 'astro:actions';
	const urlParams = new URLSearchParams(window.location.search);
	const code = urlParams.get('code')!;
	const { data, error } = await actions.askAuthToken({ code });
	if (!error) {
		console.log(data);
	} else alert(error.message);

	localStorage.setItem('access_token', data.access_token);
	window.location.href = '/';
</script>
